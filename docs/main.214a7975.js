(()=>{"use strict";var e,t={206:(e,t,n)=>{var o=n(751),i=n(641);const r={class:"app-container canvas-container"},s={ref:"playcanvas"};var a=n(922),l=n(437),d=n(24),c=n(92);let h,p,m,g;function u(e){const t=window.devicePixelRatio||1;e.forEach(e=>{e.width=e.clientWidth*t,e.height=e.clientHeight*t})}const w={data:()=>({highlightedObjectNames:[],originalMaterials:new Map,sceneObjectsByName:new Map,currentEdgeAngle:10}),methods:{takeHighResScreenshot(e=2){const t=h.domElement.width,n=h.domElement.height;h.setSize(t*e,n*e,!1),h.render(p,m);const o=h.domElement.toDataURL("image/png");h.setSize(t,n,!1),h.render(p,m);const i=document.createElement("a");i.href=o,i.download="high-res-screenshot.png",i.click()},screenshot(){this.takeHighResScreenshot()},updateHighlightedObjects(e,t=65280){this.originalMaterials.forEach((e,t)=>{t.material=e}),e.forEach(e=>{const n=this.sceneObjectsByName.get(e);if(n&&n.isMesh){const e=new a.G_z({color:t,transparent:!1,opacity:1,depthWrite:!1,depthTest:!1,side:a.$EB,wireframe:!1});n.material=e;const o=n.children[0];o.material.depthWrite=!1,o.material.depthTest=!1,o.material.opacity=1,o.material.transparent=!0}else console.warn(`Object with name "${e}" not found or is not a Mesh.`)})},onEdgeAngleChange(){this.recreateEdges(this.currentEdgeAngle)},recreateEdges(e=this.currentEdgeAngle){this.sceneObjectsByName.forEach((t,n)=>{const o=t.children.find(e=>e.isLineSegments);o&&t.remove(o);const i=new a.TDQ(t.geometry,e),r=new a.DXC(i,new a.mrM({color:0,linewidth:3}));r.material.depthTest=!0,t.add(r)}),this.updateHighlightedObjects(["Object_90","Object_88","Object_92"])},clearScene(){this.modelGroup&&(this.modelGroup.traverse(e=>{e.isMesh&&(e.geometry&&e.geometry.dispose(),Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):e.material.dispose())}),p.remove(this.modelGroup)),this.sceneObjectsByName.clear(),this.originalMaterials.clear(),this.modelGroup=new a.YJl,p.add(this.modelGroup)},loadModelFromFile(e){const t=e.target.files[0];if(!t)return;this.clearScene();const n=new FileReader;n.onload=e=>{const t=e.target.result;(new c.B).parse(t,"",e=>{this.processLoadedModel(e.scene)},void 0,e=>{console.error("Error loading model from file:",e)})},n.readAsArrayBuffer(t)},processLoadedModel(e){this.loadedModel=e,this.modelGroup.add(e);const t=e=>{const t=new a.TDQ(e.geometry,this.currentEdgeAngle),n=new a.DXC(t,new a.mrM({color:0,linewidth:3}));return n.material.depthTest=!0,n};e.traverse(e=>{if(e.isMesh){this.sceneObjectsByName.set(e.name,e),e.material=new a.G_z({color:new a.Q1f(16777215),emissive:new a.Q1f(16777215),emissiveIntensity:.5,transparent:!1,opacity:1,depthTest:!0,side:a.hB5,wireframe:!1}),this.originalMaterials.set(e,e.material);const n=t.call(this,e);e.add(n),n.position.x+=.01}}),this.focusOnModel(),console.log(this.sceneObjectsByName),this.updateHighlightedObjects(["Object_90","Object_88","Object_92"])},focusOnModel(){if(!this.loadedModel)return void console.warn("Модель не загружена, невозможно сфокусироваться.");const e=(new a.NRn).setFromObject(this.loadedModel),t=new a.iyt;e.getBoundingSphere(t);const n=t.center,o=t.radius;if(0===o)return void console.warn("Модель имеет нулевой размер, невозможно сфокусироваться.");m.lookAt(n);const i=Math.max(2*o*1.2,1);m.top=i/2,m.bottom=-i/2,m.left=i*(window.innerWidth/window.innerHeight)/-2,m.right=i*(window.innerWidth/window.innerHeight)/2,m.updateProjectionMatrix(),g.target.copy(n),g.update(),console.log("Камера сфокусирована на модели.")}},async mounted(){document.documentElement.setAttribute("data-theme","dark");const e=this.$refs.playcanvas;u([e]),p=new a.Z58,p.background=new a.Q1f(16777215),h=new l.JeP({antialias:!0,canvas:e,alpha:!0}),h.setSize(window.innerWidth,window.innerHeight),h.setPixelRatio(window.devicePixelRatio),h.shadowMap.enabled=!1;const t=window.innerWidth/window.innerHeight;m=new a.qUd(10*t/-2,10*t/2,5,-5,1,1e3),m.position.set(50,50,50),m.lookAt(0,1,0),g=new d.N(m,e),g.enableDamping=!1,g.dampingFactor=.05;const n=new a.$p8(16777215,1);p.add(n);const o=new a.ZyN(16777215,1);p.add(o);const i=new c.B;this.modelGroup=new a.YJl;let r=null;p.add(this.modelGroup),i.load("test.glb",e=>{r=e.scene,this.modelGroup.add(r);const n=e=>{const t=new a.TDQ(e.geometry,this.currentEdgeAngle),n=new a.DXC(t,new a.mrM({color:0,linewidth:3}));return n.material.depthTest=!0,n};r.traverse(e=>{if(e.isMesh){this.sceneObjectsByName.set(e.name,e),e.material=new a.G_z({color:new a.Q1f(16777215),emissive:new a.Q1f(16777215),emissiveIntensity:.5,transparent:!1,opacity:1,depthTest:!0,side:a.hB5,wireframe:!1}),this.originalMaterials.set(e,e.material);const t=n.call(this,e);e.add(t),t.position.x+=.01}}),function(){if(!r)return void console.warn("Модель не загружена, невозможно сфокусироваться.");const e=(new a.NRn).setFromObject(r),n=new a.iyt;e.getBoundingSphere(n);const o=n.center,i=n.radius;if(0===i)return void console.warn("Модель имеет нулевой размер, невозможно сфокусироваться.");m.lookAt(o);const s=Math.max(2*i*1.2,1);m.top=s/2,m.bottom=-s/2,m.left=s*t/-2,m.right=s*t/2,m.updateProjectionMatrix(),g.target.copy(o),g.update(),console.log("Камера сфокусирована на модели.")}(),console.log(this.sceneObjectsByName),this.updateHighlightedObjects(["Object_90","Object_88","Object_92"]),function e(){requestAnimationFrame(e),g.update(),h.render(p,m)}()},void 0,e=>{console.error("An error happened during loading:",e)}),window.addEventListener("resize",()=>{const t=window.innerWidth/window.innerHeight;m.left=10*t/-2,m.right=10*t/2,m.top=5,m.bottom=-5,m.updateProjectionMatrix(),u([e]),h.setSize(window.innerWidth,window.innerHeight)}),console.log("---READY---")},components:{}},f=(0,n(262).A)(w,[["render",function(e,t,n,o,a,l){return(0,i.uX)(),(0,i.CE)("div",r,[(0,i.Lk)("canvas",s,null,512),(0,i.Lk)("button",{style:{position:"absolute",top:"0",left:"0"},onClick:t[0]||(t[0]=(...e)=>l.screenshot&&l.screenshot(...e))},"S"),(0,i.Q3)(' <input\r\n      type="file"\r\n      ref="fileInput"\r\n      accept=".glb,.gltf"\r\n      @change="loadModelFromFile"\r\n      style="position: absolute; top: 30px; left: 0; display: none;"\r\n    />\r\n    <button style="position: absolute; top: 30px; left: 0;" @click="$refs.fileInput.click()">Load Model</button>\r\n    <input\r\n      type="number"\r\n      min="0"\r\n      max="360"\r\n      v-model.number="currentEdgeAngle"\r\n      @input="onEdgeAngleChange"\r\n      style="position: absolute; top: 60px; left: 0; width: 200px;"\r\n    />\r\n    <span style="position: absolute; top: 80px; left: 0;">Angle: {{ currentEdgeAngle }}°</span> ')])}]]);console.log=()=>{},(window.vue=(0,o.Ef)(f)).mount("#app")}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,o),r.exports}o.m=t,e=[],o.O=(t,n,i,r)=>{if(!n){var s=1/0;for(c=0;c<e.length;c++){for(var[n,i,r]=e[c],a=!0,l=0;l<n.length;l++)(!1&r||s>=r)&&Object.keys(o.O).every(e=>o.O[e](n[l]))?n.splice(l--,1):(a=!1,r<s&&(s=r));if(a){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,i,r]},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={792:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[s,a,l]=n,d=0;if(s.some(t=>0!==e[t])){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(l)var c=l(o)}for(t&&t(n);d<s.length;d++)r=s[d],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(c)},n=self.webpackChunk_reneos_slider_editor=self.webpackChunk_reneos_slider_editor||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=o.O(void 0,[184,753,776],()=>o(206));i=o.O(i)})();